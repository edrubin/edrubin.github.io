---
title: "Ed Rubin: Research"
---

<br>

# {.tabset .tabset-fade}

## Published

<br>

<font color="#18BC9C"><h2>Publications</h2></font>

---

#### __[The economic impact of critical-habitat designation: Evidence from vacant-land transactions](https://doi.org/10.3368/le.96.2.188)__

[Maximilian Auffhammer](https://auffhammer.com), [Maya Duru](https://www.povertyactionlab.org/duru), [Edward Rubin](https://edrub.in), and [David L. Sunding](https://are.berkeley.edu/users/david-l-sunding)

The Endangered Species Act (ESA) requires the federal government to designate critical habitat for species listed as threatened or endangered. This provision of the ESA has proven to be one of its most controversial, as critical-habitat land designation entails special management—and potentially greater regulation. In this paper we measure the economic impact of critical-habitat designation by estimating its effect on the market value of vacant land. Using data from over 13,000 vacant-land transactions that occurred within or near critical habitat for two important species in California (red-legged frog and Bay checkerspot butterfly), we show that critical-habitat designation resulted in a large and statistically significant decrease in land value. The estimated impact of critical-habitat designation is heterogeneous: the largest decreases occur within designated urban-growth boundaries.

Maximilian Auffhammer, Maya Duru, Edward Rubin, and David L. Sunding. 2020. *Land Economics*, 96(2), 188–206. [DOI: 10.3368/le.96.2.188](https://doi.org/10.3368/le.96.2.188)

<br>

```{r, out.width = "65%", echo = F, fig.align = "center"}
knitr::include_graphics(c(
  "Figures/CriticalHabitat/rlf_logprice_2006_raw.png"
))
```

<br>

#### __[Bringing Satellite-Based Air-Quality Estimates Down to Earth](https://doi.org/10.1257/pandp.20191064)__

[Meredith Fowlie](https://www.meredithfowlie.com), [Edward Rubin](https://edrub.in), and [Reed Walker](https://w-reed-walker.com)

We use state-of-the-art, satellite-based PM2.5 estimates to assess the extent to which the EPA's existing, monitor-based measurements over- or under-estimate true exposure to PM2.5 pollution. Treating satellite-based estimates as truth implies a substantial number of "policy errors"—over-regulating areas that comply with air quality standards and under-regulating other areas that appear to violate standards. We investigate the health implications of these apparent errors and highlight the importance of accounting for prediction error in satellite-based estimates. Uncertainty in "policy errors" increases substantially when we account for these underlying prediction errors.

[Published (P&P) version](https://www.aeaweb.org/articles?id=10.1257/pandp.20191064) | [NBER Working Paper No. 25560](https://www.nber.org/papers/w25560) | [EI @ Haas Working Paper 300](https://ei.haas.berkeley.edu/research/abstracts/abstract_wp300.html)

Fowlie, Meredith, Edward Rubin, and Reed Walker. 2019. "Bringing Satellite-Based Air Quality Estimates Down to Earth." *AEA Papers and Proceedings*, 109: 283-88. DOI: [10.1257/pandp.20191064
](https://doi.org/10.1257/pandp.20191064)

```{r, out.width = "50%", echo = F}
knitr::include_graphics(c(
  "Figures/AirQualityEstimates/box_cbg_di_2003_2007.png",
  "Figures/AirQualityEstimates/map_di_2005.png",
  # "Figures/AirQualityEstimates/map_county_monitors_2005.png",
  NULL
))
```

## Ongoing projects

<br>

<font color="#18BC9C"><h2>Working Papers</h2></font>

---

#### __Decomposing "the" Elasticity of Demand: Empirical and Policy Insights from 300 Million Natural Gas Bills__

with [Maximilian Auffhammer](http://www.auffhammer.com)
<br>*Revise and resubmit*

Public policy typically employs time- and group-invariant policies—partially due to historical limits that prevented precise identification of the heterogeneity underlying key parameters. We consider an important market—natural gas—where these limits have been relaxed and harness 300 million residential bills to identify income- and season-specific own-price elasticities. Exploiting service-territory spatial discontinuities and household-specific exogenous time-series variation, we show this demand elasticity varies substantially across seasons, income groups, and their interaction—from 0.06 (summer) to –0.61 (winter). This heterogeneity suggests an unexplored, *implementable*, and generalizable policy avenue—shifting fixed costs of operation into summer months—that is potentially more efficient and progressive than prevailing practices.

[NBER Working Paper No. 24295](http://www.nber.org/papers/w24295) | [EI @ Haas Working Paper 287](https://ei.haas.berkeley.edu/research/abstracts/abstract_wp287.html)

[Draft](Papers/draft-natural-gas.pdf) | [slides](Slides/slides-natural-gas.pdf) | [map: service and study area](Figures/NaturalGas/studyMaps.pdf) | [map: PRISM mean temperature](Figures/NaturalGas/mapPRISM.pdf) | [map: US natural gas pipeline](Figures/NaturalGas/mapPipeline.png)

<center>
```{r, out.width = "65%", echo = F}
knitr::include_graphics(c(
  # "Figures/NaturalGas/mapPipeline.png",
  "Figures/NaturalGas/studyMaps.png",
  # "Figures/AirQualityEstimates/map_county_monitors_2005.png",
  NULL
))
```
</center>
<br>

#### __Do polluters strategically locate near borders? The geography of US power plants and their emissions__

with [John Morehouse](https://www.johnmmorehouse.com)

US environmental policy cedes substantial authority to local agencies—creating potentials for polluters/governments to strategically export emissions. We identify such strategies among coal-fueled power plants. First, we document that electricity generators locate near administrative borders. As water influences borders/siting, we develop a simple, non-parametric test that shows coal plants located to reduce downwind exposure. Natural-gas plants—facing lower regulatory pressure—do not exhibit this behavior. Using a state-of-the-art, particle-trajectory model, we illustrate coal pollution's extreme mobility: within 6 hours, 50% of coal plants' emissions leave their source states—99% depart source counties. These strategic responses emphasize the importance of federal oversight and transport-focused regulation. 

[Draft](Papers/draft-plant-locations.pdf)

<center>

```{r, out.width = "45%", echo = F}
knitr::include_graphics(c(
  "Figures/PlantLocations/plant-wind-oris-628.png",
  "Figures/PlantLocations/hysplit-oris-628-january.png",
  NULL
))
```

</center>
<br>

#### __Strategic Shutdowns of Air Quality Monitors: Evidence from Jersey City and Across the U.S.__

with Yingfei Mu and [Eric Zou](https://www.eric-zou.com)

Tolerance for gaps in compliance (self-)monitoring data may induce strategic timing in local agents' monitoring activity. This paper builds a framework to detect whether local governments skip air pollution monitoring when they expect air quality to deteriorate. We infer this expectation from air quality alerts—public advisories based on local governments' own pollution forecasts—and test whether monitors' sampling rates fall when these alerts occur. We first use this method to test an individual pollution monitor in Jersey City, NJ, suspected of a deliberate shutdown during the 2013 "Bridgegate" traffic jam. Consistent with strategic shutdowns, this monitor's sampling rate drops by 33% on pollution-alert days. Building on large-scale inference tools, we then apply the method to test over 1,300 monitors across the U.S., finding 14 metro areas with clusters of monitors showing similar strategic behavior. We discuss imputation methods and policy responses that may help deter future strategic monitoring.

[NBER Working Paper No. 28735](https://www.nber.org/papers/w28735)

[Current draft](Papers/draft-strategic-monitoring.pdf)

<br>

#### __What can we machine learn (too much of) in 2SLS? Insights from a bias decomposition and simulation__

with Connor Lennon and [Glen Waddell](http://www.glenwaddell.com)

Machine learning (ML) primarily evolved to solve "prediction problems." The first stage of two-stage least squares (2SLS) is a prediction problem—suggesting gains from utilizing ML in 2SLS's first stage. However, little guidance exists on when ML helps 2SLS—or when it hurts. We investigate the implications of inserting ML into 2SLS, decomposing the bias into three informative components. Mechanically, ML-in-2SLS procedures face issues common to prediction *and* causal-inference settings—and their interaction. Through simulation, we show linear ML methods (*e.g.*, post-Lasso) work "well," while nonlinear methods (*e.g.*, random forests, neural nets) generate substantial bias in second-stage estimates—some *exceeding* the bias of endogenous OLS.

[Draft](Papers/draft-mliv.pdf)

<center>

```{r, out.width = "49%", echo = F}
knitr::include_graphics(c(
  "Figures/MLIV/sim-density-ridge-t2.png",
  "Figures/MLIV/sim-exclusion-interaction-3-trees.png",
  NULL
))
```

</center>
<br>


<br>

#### __Coordination versus Environmental Adaptation: How Much Does Standardized Time Change Behavior?__

with [Patrick Baylis]() and [Severin Borenstein]()

The practice of standardizing the designation of time is a central device for coordinating activities and economic behaviors across individuals. However, there is nearly always a tension between an individual coordinating activities and carrying out those activities at their own preferred time. When time is standardized across large geographic areas, that tension is enhanced, because norms about the "clock times" of activities conflict with local environmental conditions created by natural or "solar" time. We study this tension by examining how geographic and temporal variation in solar time within time zones affects the timing of a range of common behaviors in the United States. Specifically, we estimate the degree to which people shift their online behavior (through Twitter), their commute (using the Census), and there visits to businesses and other establishments (using foot traffic data). We find that, on average, a one hour shift in the differential between solar time and clock time—approximately the width of a time zone—leads to shifting behavior by between 10 and 20 minutes. This shows that while adapting to local environmental factors significantly offsets the differential between solar time and clock time, the behavioral nudge and coordination value of clock time has the larger influence on activity.  We also study how the trade-off differs across activities and population demographics.

#### __Are our hopes too high? Testing cannabis legalization's potential to reduce criminalization__

new draft in preparation | slides | [US legalization map](Figures/Dispensaries/mapStateLegalPot.pdf) |  [timeline](Figures/Dispensaries/timeline.pdf) | [time series drug offenses](Figures/Dispensaries/seriesCrimeNonPot.pdf)

<br>

#### __Do aerially applied pesticides affect local air quality? Empirical evidence from California's San Joaquin Valley__

Many policymakers, public-health advocates, and citizen groups question whether current pesticide regulations properly equate the marginal social costs of pesticide applications to their marginal social benefits—with particular concern for negative health effects stemming from pesticide exposure. Additionally, recent research and policies in public health, epidemiology, and economics emphasize how fine particulate matter (PM2.5) concentrations harm humans through increased mortality, morbidity, mental health issues, and a host of socioeconomic outcomes. This paper presents the first empirical evidence that aerially applied pesticides increase local PM2.5 concentrations. To causally estimate this effect, I combine the universe of aerial pesticide applications in the five southern counties of California's San Joaquin Valley (1.8M reports) with the U.S. EPA's PM2.5 monitoring network—exploiting (__1__) spatiotemporal variation in aerial pesticide applications and (__2__) variation in local wind patterns. I find significant evidence that (upwind) aerial pesticide applications within 1.5km increase local PM2.5 concentrations. The magnitudes of the point estimates suggest that the top decile of aerial applications may sufficiently increase local PM2.5 to warrant concern for human health.

<br>

<font color="#18BC9C"><h2>In Progress</h2></font>

---

#### __Declining power-plant emissions, co-benefits, and regulatory rebound__

with [Meredith Fowlie](https://www.meredithfowlie.com) and Catherine Wright

<br>

#### __Interactions between measurement error and policy__

<br>

#### __Mismeasurement in exposure and access: Insights from cellphone data__

<br>

#### __How salient are environmental risks? The short- and long-run effects of lead exposure in piped water__

<br>

#### __Is "Michelle" less productive than "Michael"? A field experiment on consumer-based gender discrimination in the marketplace__

with [Erin Kelley](https://www.erinmunrokelley.com) and [Matthew Pecenco](http://www.matthewpecenco.com)

<br>


## Books

<br>

<font color="#18BC9C"><h2>Books</h2></font>

---

#### __[Data Science for Public Policy](https://www.springer.com/gp/book/9783030713515)__

with [Jeffrey Chen](http://jeffchen.org) and [Gary Cornwall](https://garycornwall.weebly.com)

This textbook presents the essential tools and core concepts of data science to public officials, policy analysts, and economists among others in order to further their application in the public sector. An expansion of the quantitative economics frameworks presented in policy and business schools, this book emphasizes the process of asking relevant questions to inform public policy. Its techniques and approaches emphasize data-driven practices, beginning with the basic programming paradigms that occupy the majority of an analyst’s time and advancing to the practical applications of statistical learning and machine learning. The text considers two divergent, competing perspectives to support its applications, incorporating techniques from both causal inference and prediction. Additionally, the book includes open-sourced data as well as live code, written in R and presented in notebook form, which readers can use and modify to practice working with data.

Book links: [Springer](https://www.springer.com/gp/book/9783030713515) | [Amazon](https://www.amazon.com/dp/B09F597WXP/)

<br>

```{r, out.width = "65%", echo = F, fig.align = "center"}
knitr::include_graphics(c(
  "Figures/book-cover.png"
))
```

<br>

## Presentations

<br>

__What's missing in environmental (self-)monitoring? Evidence from strategic shutdowns of pollution monitors__
<br> AERE Remote Conference, June 2021
<br><br>

__Downwind and out: The Strategic dispersion of power plants and their pollution__
<br> AERE Remote Conference, June 2021
<br><br>

__A retrospective analysis of indirect air-quality benefits from power-sector emissions reductions__
<br> RFF/EPA (Online), December 2020
<br><br>

__Estimating and decomposing 'the' elasticity of demand: Empirical and policy insights from 600 million natural gas bills__
<br> Duke Energy Data Analytics Symposium (Online), December 2020
<br><br>

__Mismeasurement in exposure and access: Insights from cellphone data__
<br> AERE Remote Conference, June 2020
<br><br>

__Declining power-plant emissions, co-benefits, and regulatory rebound__
<br> ASSA (San Diego), January 2020
<br><br>

__Mismeasurement in exposure and access: Insights from cellphone data__
<br> Western Economic Association Annual Conference, June 2019
<br><br>

__The economic impact of critical-habitat designation: Evidence from vacant-land transactions__
<br> The Occasional Workshop (UCSB), November 2018
<br><br>

__Natural gas elasticities and optimal cost recovery under heterogeneity: Evidence from 300 million natural gas bills in California__
<br> World Congress of Environmental Economics (WCERE), June 2018
<br><br>

__Is "Michelle" less productive than "Michael"? A field experiment on consumer-based gender discrimination in the marketplace__
<br> UC Berkeley, Computational Text Analysis Working Group, April 2018
<br><br>

__Natural gas elasticities and optimal cost recovery under heterogeneity: Evidence from 300 million natural gas bills in California__
<br> University of Oregon, Economics, February 2018
<br><br>

__Is "Michelle" less productive than "Michael"? A field experiment on consumer-based gender discrimination in the marketplace__
<br> IGC-PEDL Workshop at Oxford, December 2017
<br><br>

__Natural gas elasticities and optimal cost recovery under heterogeneity: Evidence from 300 million natural gas bills in California__
<br> Heartland Environmental and Resource Economics Workshop, September 2017
<br><br>

__Is "Michelle" less productive than "Michael"? A field experiment on consumer-based gender discrimination in the marketplace__
<br> Berkeley Development Economics Lunch, September 2017
<br><br>

__Natural gas elasticities and optimal cost recovery under heterogeneity: Evidence from 300 million natural gas bills in California__
<br> Camp Resources, August 2017
<br><br>

__Natural gas elasticities and optimal cost recovery under heterogeneity: Evidence from 300 million natural gas bills in California__
<br> AAEA Annual Meeting, August 2017
<br><br>

__Do marijuana stores increase or reduce neighborhood crime? Evidence from Denver, Colorado__
<br> UC Berkeley, Summer Research Seminar, July 2017
<br><br>

__Natural gas elasticities and optimal cost recovery under heterogeneity: Evidence from 300 million natural gas bills in California__
<br> AERE Annual Summer Conference, June 2017
<br><br>

__Summertime, and pass-through is easier: Chasing down price elasticities for residential natural gas demand in 275 million bills__
<br> 22nd Annual POWER Conference on Energy Research and Policy, March 2017
<br><br>

__Natural gas elasticities, seasonal heterogeneity, and consumer behavior: Evidence from 300M+ bills__
<br> UC Berkeley, Environmental and Resource Economics Seminar, November 2016
<br><br>

__(Mile-) High Quandaries: Evidence from Denver that Marijuana Legalization May Increase Drug Arrests__
<br> UC Berkeley, Environmental and Resource Economics Seminar, April 2015
<br><br>

__Irrigation and Climatic Effects on Water Levels in the U.S. High Plains Aquifer Along the 41st Parallel in Nebraska (and Several Questions about Model Complexity)__
<br> University of Nebraska-Lincoln, Statistics Departmental Seminar, March 2013
<br><br>

__Irrigation and Climatic Effects on Water Levels in the U.S. High Plains Aquifer__
<br> International Conference of Agricultural Economists, poster, August 2012
<br><br>

__Reproductive Ecology of Western Painted Turtles (Chrysemys picta)__
<br> Midwest Fish and Wildlife Conference, poster, December 2006
<br><br>

## R scripts

Run R code in terminal without entering R or saving a script. (The `-e` option evaluates the given R expression.)

```{bash, eval = F}
Rscript -e 'set.seed(12345); x <- rnorm(1e3); mean(x)'
Rscript -e 'rmarkdown::render_site("research.Rmd")'
```

Create a nice timeline (shown below) in R's `ggplot2`.

```{r timeline, echo = F, eval = T, fig.height = 3.5, fig.width = 8.75, fig.retina = 2, dpi = 150, message = F}
# Setup ----
# Packages
library(ggplot2)
# Define colors (from https://www.materialpalette.com)
dark_primary_color   <- "#C2185B"
primary_color        <- "#E91E63"
light_primary_color  <- "#F8BBD0"
text_primary_color   <- "#FFFFFF"
accent_color         <- "#9E9E9E"
primary_text_color   <- "#212121"
secondary_text_color <- "#757575"
divider_color        <- "#BDBDBD"

# Plot the timeline ----
ggplot() +
  # Two rectangles
  geom_rect(aes(xmin = 2009, xmax = 2011+4/12, ymin = 0, ymax = 0.35),
    fill = divider_color) +
  geom_rect(aes(xmin = 2011+4/12, xmax = 2014, ymin = 0, ymax = 0.35),
    fill = light_primary_color) +
  geom_rect(aes(xmin = 2014, xmax = 2017, ymin = 0, ymax = 0.35),
    fill = primary_color) +
  # Label rectangles (periods)
  annotate(geom = "text", x = 2010, y = -0.15, label = "Period A",
    color = divider_color) +
  annotate(geom = "text", x = 2015.5, y = -0.15, label = "Period B",
    color = primary_color) +
  # Add ellipses
  annotate(geom = "point", x = seq(2009-0.15, 2009-0.45, -0.15), y = 0.175,
    size = 1.5, color = divider_color) +
  annotate(geom = "point", x = seq(2017+0.15, 2017+0.45, 0.15), y = 0.175,
    size = 1.5, color = primary_color) +
  # Time axis
  geom_hline(yintercept = 0, size = 1, color = primary_text_color) +
  # Label time
  annotate(geom = "text", x = 2009:2017, y = -0.05, label = 2009:2017,
    size = 4, color = secondary_text_color) +
  # Points for events
  annotate(geom = "point", x = c(2011+4/12, 2012+7/12, 2014), y = 0,
    size = 4, color = primary_text_color) +
  # Label events:
  # First event
  annotate(geom = "text", x = 2011+4/12+0.15, y = 0.9, hjust = 0,
    label = "An event triggers a change", color = primary_text_color) +
  geom_segment(aes(x = 2011+4/12, xend = 2011+4/12,
    y = 0, yend = 0.9), color = primary_text_color) +
  geom_segment(aes(x = 2011+4/12, xend = 2011+4/12+0.1,
    y = 0.9, yend = 0.9), color = primary_text_color) +
  # Intermediate event
  annotate(geom = "text", x = 2012+7/12+0.15, y = 0.7, hjust = 0,
    label = "A relevant intermediate event", color = primary_text_color) +
  geom_segment(aes(x = 2012+7/12, xend = 2012+7/12,
      y = 0, yend = 0.7), color = primary_text_color) +
  geom_segment(aes(x = 2012+7/12, xend = 2012+7/12+0.1,
      y = 0.7, yend = 0.7), color = primary_text_color) +
  # Period B begins
  annotate(geom = "text", x = 2014+0.15, y = 0.5, hjust = 0,
    label = "The new period officially begins", color = primary_text_color) +
  geom_segment(aes(x = 2014, xend = 2014,
      y = 0, yend = 0.5), color = primary_text_color) +
  geom_segment(aes(x = 2014, xend = 2014+0.1,
      y = 0.5, yend = 0.5), color = primary_text_color) +
  # Theme stuff
  theme_bw() +
  ylim(c(-0.15,1)) +
  theme(axis.text = element_blank(), axis.title = element_blank(),
    axis.ticks = element_blank(), panel.grid = element_blank(),
    panel.border = element_blank())
```

```{r timeline, echo = T, eval = F}
```

## LaTeX

My LaTeX (beamer) template: [.tex file](MiscFiles/beamerTemplate.tex) | [example PDF](MiscFiles/beamerTemplate.pdf)

![Example of my slide template.](MiscFiles/beamerTemplate.gif)

## Bash

### List files (recursively) by size

Lists all **files** in a directory (here `.`), sorts from largest to smallest, and displays top `20` (largest).

```{bash, eval = F}
find . -type f -exec du -ah {} + | sort -rh | head -20
``` 
Hat tip: [StackExchange](https://unix.stackexchange.com/questions/22432/getting-size-with-du-of-files-only)

### Pretty CSV scrolling

```{bash, eval = F}
cat data.csv | column -t -s, | less -S
```
Hat tip (and more): [Stefaan Lippens](http://stefaanlippens.net/pretty-csv.html).

For a bit more _raw_ view:
```{bash, eval = F}
column -s, -t < data.csv | less -#2 -N -S
```

### Git

Remove a file (`your.file`) from Git's cache
```{bash, eval = F}
git rm --cached your.file
```

Begin tracking a file extension (`.eg`) with Git's [Large File Storage](https://git-lfs.github.com/) (LFS) and check the `.gitattributes` file for success.
```{bash, eval = F}
git lfs track "*.eg"
nano .gitattributes
```

Check which files LFS currently tracks.
```{bash, eval = F}
git lfs ls-files
```

### Pandoc

Convert a Markdown (`.txt`) file to Word (`.docx`).
```{bash, eval = F}
pandoc -Ss example.txt -o example.docx
```

Convert a Markdown (`.txt`) file to PDF (`.pdf`).
```{bash, eval = F}
pandoc -Ss example.txt -o example.pdf
```

### Renaming

Place a "1" between the first four characters and the subsequent characters in each filename in a folder.
```{bash, eval = F}
for i in *; do mv $i "${i:0:4}1${i:4}"; done
```

### Sleeping and shutdown

Tell the computer to wait a bit and then go to sleep.
```{bash, eval = F}
sleep 14400; pmset sleepnow
```

Tell the computer to shutdown now.
```{bash, eval = F}
sudo shutdown -h now
```

Shut it down at a specific time (here: 2:30pm on 01 January 2016)
```{bash, eval = F}
sudo shutdown -h 1601011530
```

Shut it down after a specified amount of time (here: 30 minutes)
```{bash, eval = F}
sudo shutdown -h +30
```

### Miscellany

OSX: Show only active apps in the terminal. [h/t](https://www.macrumors.com/how-to/macos-dock-show-active-apps/)
```{bash, eval = F}
defaults write com.apple.dock static-only -bool true; killall Dock
```

Kill all processes named "rsession".
```{bash, eval = F}
killall -m "rsession"
```

Re-index the Spotlight utility.
```{bash, eval = F}
sudo mdutil -E /
```

Linux code for playing hide and seek.
<br>_Warning_ You might not want HAL to find you.

```{bash, eval = F}
for i in {1..30}; do say ${i}; done; say 'ready or not, here i come'
```
