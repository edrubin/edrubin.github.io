---
title: "Ed Rubin: Research"
---

```{r, include=FALSE}
pacman::p_load(magick)
# Trim images
image_read("Figures/Time/sunrise-summer.png") |>
  image_trim() |>
  image_write("Figures/Time/sunrise-summer-trim.png")
image_read("Figures/Time/sunrise-winter.png") |>
  image_trim() |>
  image_write("Figures/Time/sunrise-winter-trim.png")
```

<br>

# {.tabset .tabset-fade}

## Published

<br>

<font color="#18BC9C"><h2>Publications</h2></font>

---

#### __[What's *missing* in environmental (self-)monitoring: Evidence from strategic shutdowns of pollution monitors](Papers/draft-strategic-monitoring.pdf)__

Yingfei Mu, [Edward Rubin](https://edrub.in), and [Eric Zou](https://www.eric-zou.com)
<br>*Accepted*, REStat

Tolerance for gaps in compliance (self-)monitoring data may induce strategic timing in local agents' monitoring activity. This paper builds a framework to detect whether local governments skip air pollution monitoring when they expect air quality to deteriorate. We infer this expectation from air quality alerts—public advisories based on local governments' own pollution forecasts—and test whether monitors' sampling rates fall when these alerts occur. We first use this method to test an individual pollution monitor in Jersey City, NJ, suspected of a deliberate shutdown during the 2013 "Bridgegate" traffic jam. Consistent with strategic shutdowns, this monitor's sampling rate drops by 33% on pollution-alert days. Building on large-scale inference tools, we then apply the method to test over 1,300 monitors across the U.S., finding 14 metro areas with clusters of monitors showing similar strategic behavior. We discuss imputation methods and policy responses that may help deter future strategic monitoring.

[NBER Working Paper No. 28735](https://www.nber.org/papers/w28735)

[Current draft](Papers/draft-strategic-monitoring.pdf)

<center>

```{r, out.width = "45%", echo = F}
knitr::include_graphics(c(
  "Figures/Intermittent/beta-88101.png",
  "Figures/Intermittent/interpolate-88101.png",
  NULL
))
```

</center>

<br>

<hr style="width:62%">

<br>

#### __[Quantifying heterogeneity in the price elasticity of residential natural gas](https://www.journals.uchicago.edu/eprint/Q8UYEM4MAQKB6WEDJ8TV/full?redirectUri=/doi/epdf/10.1086/726017)__

[Edward Rubin](https://edrub.in) and [Maximilian Auffhammer](https://www.auffhammer.com)
<br>*Forthcoming*, JAERE

We exploit a spatial discontinuity in two natural gas utilities' service territory—combined with variation in their block-rate pricing structure and a difference in how prima facie determined wholesale prices are deferentially passed though to consumers—to identify average, seasonal, and income-specific own-price elasticities of residential natural gas demand. We estimate an average elasticity ranging from 0.15–0.19 depending on the measure of price used. We further estimate that this elasticity varies substantially across seasons, income groups, and their interaction. We find no significant difference in consumers' responses to average versus marginal prices.

Previous titles: *Decomposing "the" elasticity of demand: Empirical and policy insights from 300 million natural gas bills*; *Natural gas price elasticities and optimal cost recovery under consumer heterogeneity: Evidence from 300 million natural gas bills*; *Summertime, and pass-through is easier: Chasing down price elasticities for residential natural*

Press coverage: [The Economist](https://www.economist.com/finance-and-economics/2022/08/25/how-to-avoid-energy-rationing)

<!-- [Paper](Papers/draft-natural-gas.pdf) | [slides](Slides/slides-natural-gas.pdf) | [map: service and study area](Figures/NaturalGas/studyMaps.pdf) | [map: PRISM mean temperature](Figures/NaturalGas/mapPRISM.pdf) | [map: US natural gas pipeline](Figures/NaturalGas/mapPipeline.png) -->

<!-- [NBER Working Paper No. 24295](http://www.nber.org/papers/w24295) | [EI @ Haas Working Paper 287](https://ei.haas.berkeley.edu/research/abstracts/abstract_wp287.html) -->

Edward Rubin and Maximilian Auffhammer. 2024. *Journal of the Association of Environmental and Resource Economists*, 11(2). [DOI: 10.1086/726017](https://www.journals.uchicago.edu/eprint/Q8UYEM4MAQKB6WEDJ8TV/full?redirectUri=/doi/epdf/10.1086/726017)

<center>
```{r, out.width = "65%", echo = F}
knitr::include_graphics(c(
  # "Figures/NaturalGas/mapPipeline.png",
  "Figures/NaturalGas/studyMaps.png",
  # "Figures/AirQualityEstimates/map_county_monitors_2005.png",
  NULL
))
```
</center>

<br>

<hr style="width:62%">

<br>

#### __[The economic impact of critical-habitat designation: Evidence from vacant-land transactions](https://doi.org/10.3368/le.96.2.188)__

[Maximilian Auffhammer](https://auffhammer.com), [Maya Duru](https://www.povertyactionlab.org/duru), [Edward Rubin](https://edrub.in), and [David L. Sunding](https://are.berkeley.edu/users/david-l-sunding)

The Endangered Species Act (ESA) requires the federal government to designate critical habitat for species listed as threatened or endangered. This provision of the ESA has proven to be one of its most controversial, as critical-habitat land designation entails special management—and potentially greater regulation. In this paper we measure the economic impact of critical-habitat designation by estimating its effect on the market value of vacant land. Using data from over 13,000 vacant-land transactions that occurred within or near critical habitat for two important species in California (red-legged frog and Bay checkerspot butterfly), we show that critical-habitat designation resulted in a large and statistically significant decrease in land value. The estimated impact of critical-habitat designation is heterogeneous: the largest decreases occur within designated urban-growth boundaries.

Maximilian Auffhammer, Maya Duru, Edward Rubin, and David L. Sunding. 2020. *Land Economics*, 96(2), 188–206. [DOI: 10.3368/le.96.2.188](https://doi.org/10.3368/le.96.2.188)

<br>

```{r, out.width = "65%", echo = F, fig.align = "center"}
knitr::include_graphics(c(
  "Figures/CriticalHabitat/rlf_logprice_2006_raw.png"
))
```

<br>

<hr style="width:62%">

<br>

#### __[Bringing Satellite-Based Air-Quality Estimates Down to Earth](https://doi.org/10.1257/pandp.20191064)__

[Meredith Fowlie](https://www.meredithfowlie.com), [Edward Rubin](https://edrub.in), and [Reed Walker](https://w-reed-walker.com)

We use state-of-the-art, satellite-based PM2.5 estimates to assess the extent to which the EPA's existing, monitor-based measurements over- or under-estimate true exposure to PM2.5 pollution. Treating satellite-based estimates as truth implies a substantial number of "policy errors"—over-regulating areas that comply with air quality standards and under-regulating other areas that appear to violate standards. We investigate the health implications of these apparent errors and highlight the importance of accounting for prediction error in satellite-based estimates. Uncertainty in "policy errors" increases substantially when we account for these underlying prediction errors.

[Published (P&P) version](https://www.aeaweb.org/articles?id=10.1257/pandp.20191064) | [NBER Working Paper No. 25560](https://www.nber.org/papers/w25560) | [EI @ Haas Working Paper 300](https://ei.haas.berkeley.edu/research/abstracts/abstract_wp300.html)

Meredith Fowlie, Edward Rubin, and Reed Walker. 2019. "Bringing Satellite-Based Air Quality Estimates Down to Earth." *AEA Papers and Proceedings*, 109: 283-88. DOI: [10.1257/pandp.20191064
](https://doi.org/10.1257/pandp.20191064)

<center>

```{r, out.width = "45%", echo = F}
knitr::include_graphics(c(
  "Figures/AirQualityEstimates/box_cbg_di_2003_2007.png",
  "Figures/AirQualityEstimates/map_di_2005.png",
  # "Figures/AirQualityEstimates/map_county_monitors_2005.png",
  NULL
))
```

</center>

## Ongoing projects

<br>

<font color="#18BC9C"><h2>Working Papers</h2></font>

---

#### __[Downwind and out: The strategic dispersion of power plants and their pollution](Papers/draft-plant-locations.pdf)__

with [John Morehouse](https://www.johnmmorehouse.com)
<br>*Revise and resubmit*, JAERE (*resubmitted*)

US environmental policy cedes substantial authority to local agencies—creating potentials for polluters/governments to strategically export emissions. We identify such strategies among coal-fueled power plants. First, we document that electricity generators locate near administrative borders. As water influences borders/siting, we develop a simple, non-parametric test that shows coal plants located to reduce downwind exposure. Natural-gas plants—facing lower regulatory pressure—do not exhibit this behavior. Using a state-of-the-art, particle-trajectory model, we illustrate coal pollution's extreme mobility: within 6 hours, 50% of coal plants' emissions leave their source states—99% depart source counties. These strategic responses emphasize the importance of federal oversight and transport-focused regulation. 

[Draft](Papers/draft-plant-locations.pdf)

<center>

```{r, out.width = "45%", echo = F}
knitr::include_graphics(c(
  "Figures/PlantLocations/plant-wind-oris-628.png",
  "Figures/PlantLocations/hysplit-oris-628-january.png",
  NULL
))
```

</center>

<br>

<hr style="width:62%">

<br>

#### __[Customer Discrimination in the Workplace: Evidence from Online Sales](Papers/draft-gender-bias.pdf)__

with [Erin Kelley](https://www.erinmunrokelley.com), [Gregory Lane](https://www.gregoryvlane.com), and [Matthew Pecenco](http://www.matthewpecenco.com)
<br>*Accepted*, JOLE

Many workers are evaluated on their ability to engage with customers. This paper measures the impact of gender-based customer discrimination on the productivity of online sales agents working across Sub-Saharan Africa. Using a novel framework that randomly varies the gender of names presented to customers without changing worker behavior, we find that the assignment of a female-sounding name leads to 50 percent fewer purchases by customers. The results appear to be driven by relatively lower interest in engaging with female workers. Since worker productivity informs firm hiring, pay, and promotion decisions, these results are important for understanding the persistence of identity-based discrimination in the labor market.

[NBER Working Paper No. 31998](https://www.nber.org/papers/w31998) | [Becker Friedman Institute Working Paper No. 2023-25](Papers/draft-gender-bias.pdf) | [World Bank Policy Research Working Paper No. 10228](Papers/wp-gender-bias.pdf) | [Draft](Papers/draft-gender-bias.pdf)

[J-PAL Summary](https://www.povertyactionlab.org/evaluation/online-customer-discrimination-against-female-workers-sub-saharan-africa) | [BFI Summary](https://bfi.uchicago.edu/insight/finding/customer-discrimination-in-the-workplace-evidence-from-online-sales/)

<br>

<hr style="width:62%">

<br>

#### __[Machine learning the first stage in 2SLS: Practical guidance from a bias decomposition and simulation](Papers/draft-mliv.pdf)__

with [Connor Lennon](https://www.connormlennon.com) and [Glen Waddell](http://www.glenwaddell.com)
<br>*Submitted*

Machine learning (ML) primarily evolved to solve "prediction problems. The first stage of two-stage least squares (2SLS) is a prediction problem, suggesting potential gains from ML first-stage assistance. However, little guidance exists on when ML helps 2SLS—or when it hurts. We investigate the implications of inserting ML into 2SLS, decomposing the bias into three informative components. Mechanically, ML-in-2SLS procedures face issues common to prediction *and* causal-inference settings—and their interaction. Through simulation, we show linear ML methods (*e.g.*, post-Lasso) work well, while nonlinear methods (*e.g.*, random forests, neural nets) generate substantial bias in second-stage estimates—potentially *exceeding* the bias of endogenous OLS.

[Draft](Papers/draft-mliv.pdf)

<center>

```{r, out.width = "45%", echo = F}
knitr::include_graphics(c(
  "Figures/MLIV/sim-density-ridge-t2.png",
  "Figures/MLIV/sim-exclusion-interaction-3-trees.png",
  NULL
))
```

</center>

<br>

<hr style="width:62%">

<br>

#### __[Does time shift behavior? The clock- vs. solar-time tradeoff](Papers/draft-time.pdf)__

with [Patrick Baylis](https://www.patrickbaylis.com) and [Severin Borenstein](https://haas.berkeley.edu/faculty/borenstein-severin/)
<br>*Submitted*

Standardized clock time is perhaps the most ubiquitous behavioral nudge on the planet. It helps schedule and coordinate economic behavior, but also creates tension when it shifts activities away from their locally optimal solar time. Debates about daylight saving time and areas switching time zones center on this tension. We directly measure the clock- vs. solar-time tradeoff using geolocated data on online behavior (Twitter), commute times (Census), and foot traffic (SafeGraph). A one-hour change in the wedge between solar time and clock time shifts behavior 10–32 minutes, with larger effects in northern latitudes and for activities occurring closer to sunrise.

[NBER Working Paper No. 30999](https://www.nber.org/papers/w30999) | [Current draft](Papers/draft-time.pdf)

NBER Digest: [When Clocks Say It's One Time and the Sun Says It's Another](https://www.nber.org/digest/20235/when-clocks-say-its-one-time-and-sun-says-its-another) | Blog: [Does Anybody Really Care What Time It Is?](https://energyathaas.wordpress.com/2023/03/06/does-anybody-really-care-what-time-it-is/)

<center>

```{r, out.width = "45%", echo = F}
knitr::include_graphics(c(
  "Figures/Time/sunrise-summer-trim.png",
  "Figures/Time/sunrise-winter-trim.png",
  NULL
))
knitr::include_graphics("Figures/Time/legend-common.png")
```

</center>

<br>

<hr style="width:62%">

#### __[Glyphosate exposure and GM seed rollout unequally reduced perinatal health](Papers/draft-gly.pdf)__

with [Emmett Saulnier](https://www.emmettsaulnier.com/)
<br>*Submitted*

The advent of herbicide-tolerant genetically modified (GM) crops spurred rapid and widespread use of the herbicide glyphosate (GLY) throughout US agriculture. In the two decades following GM-seed's introduction, the volume of GLY applied in the US increased by more than 750%. Despite its breadth and scale, science and policy remain unresolved regarding the effects of GLY on human health. We identify the causal effect of GLY exposure on perinatal health by combining (1) county-level variation in GLY use driven by (2) the timing of the GM technology and (3) differential geographic suitability for GM crops. Our results suggest the introduction of GM seeds and GLY significantly reduced average birthweight and gestational length. While we find effects throughout the birthweight distribution, low-weight births experienced the largest reductions: the effect for births in the lowest decile is 4.5 times larger than that of the highest decile. Together, these estimates suggest that GLY exposure caused previously undocumented and unequal health costs for rural US communities over the last 20 years.

[Current draft](Papers/draft-gly.pdf) | [On SSRN](https://papers.ssrn.com/sol3/papers.cfm?abstract_id=4867914) with DOI [10.2139/ssrn.4867914](http://dx.doi.org/10.2139/ssrn.4867914)

<center>

```{r, out.width = "30%", echo = F}
knitr::include_graphics(c(
  "Figures/Glyphosate/fs-main-policy-dbwt.jpeg",
  "Figures/Glyphosate/rf-main-policy-dbwt.jpeg",
  "Figures/Glyphosate/map-glyph-km2-diff-9512.jpeg",
  NULL
))
```

</center>

<br>

<hr style="width:62%">

#### __[Unequal avoidance: Disparities in smoke-induced out-migration](Papers/draft-smoke.pdf)__

with [M. Steven Holloway](https://mstevenholloway.page/home)

Organisms reduce risk exposure through short-term avoidance—*flight*. However, this flight strategy may not be equally accessible throughout a population. We combine cellphone movements, satellite-based wildfire smoke plumes, and Census data to document substantial heterogeneity/inequity in communities' tendencies to out-migrate to avoid smoke. Higher-income and whiter populations travel out of their counties at significantly higher rates during smoke events. These results suggest that the same populations who face social and environmental injustice on many other measures are less able to avoid wildfire smoke—underscoring equity concerns for wildfire damages and climate adaptation.

[Draft](Papers/draft-smoke.pdf)

<center>

```{r, out.width = "24%", echo = F}
knitr::include_graphics(c(
  'Figures/Smoke/map.png',
  NULL
))
```
```{r, out.width = "30%", echo = F}
knitr::include_graphics(c(
  'Figures/Smoke/hhinc-q50-subrural0.png',
  'Figures/Smoke/shrhispanic-q50-subrural0.png',
  NULL
))
```

</center>

<br>

<hr style="width:62%">

<br>

#### __Are our hopes too high? Testing cannabis legalization's potential to reduce criminalization__

*new draft in preparation* | slides | [US legalization map](Figures/Dispensaries/mapStateLegalPot.pdf) |  [timeline](Figures/Dispensaries/timeline.pdf) | [time series drug offenses](Figures/Dispensaries/seriesCrimeNonPot.pdf)

<br>

<hr style="width:62%">

<br>

#### __Do aerially applied pesticides affect local air quality? Empirical evidence from California's San Joaquin Valley__

Many policymakers, public-health advocates, and citizen groups question whether current pesticide regulations properly equate the marginal social costs of pesticide applications to their marginal social benefits—with particular concern for negative health effects stemming from pesticide exposure. Additionally, recent research and policies in public health, epidemiology, and economics emphasize how fine particulate matter (PM2.5) concentrations harm humans through increased mortality, morbidity, mental health issues, and a host of socioeconomic outcomes. This paper presents the first empirical evidence that aerially applied pesticides increase local PM2.5 concentrations. To causally estimate this effect, I combine the universe of aerial pesticide applications in the five southern counties of California's San Joaquin Valley (1.8M reports) with the U.S. EPA's PM2.5 monitoring network—exploiting (__1__) spatiotemporal variation in aerial pesticide applications and (__2__) variation in local wind patterns. I find significant evidence that (upwind) aerial pesticide applications within 1.5km increase local PM2.5 concentrations. The magnitudes of the point estimates suggest that the top decile of aerial applications may sufficiently increase local PM2.5 to warrant concern for human health.

*new draft in preparation*

<br>

<font color="#18BC9C"><h2>In Progress</h2></font>

---

#### __Declining power-plant emissions, co-benefits, and regulatory rebound__

with [Meredith Fowlie](https://www.meredithfowlie.com) and Catherine Wright

<br>

#### __Interactions between measurement error and policy__

<br>

#### __Mismeasurement in exposure and access: Insights from cellphone data__

<br>

#### __How salient are environmental risks? The short- and long-run effects of lead exposure in piped water__

<br>

## Books

<br>

<font color="#18BC9C"><h2>Books</h2></font>

---

#### __[Data Science for Public Policy](https://www.springer.com/gp/book/9783030713515)__

with [Jeffrey Chen](http://jeffchen.org) and [Gary Cornwall](https://garycornwall.weebly.com)

This textbook presents the essential tools and core concepts of data science to public officials, policy analysts, and economists among others in order to further their application in the public sector. An expansion of the quantitative economics frameworks presented in policy and business schools, this book emphasizes the process of asking relevant questions to inform public policy. Its techniques and approaches emphasize data-driven practices, beginning with the basic programming paradigms that occupy the majority of an analyst's time and advancing to the practical applications of statistical learning and machine learning. The text considers two divergent, competing perspectives to support its applications, incorporating techniques from both causal inference and prediction. Additionally, the book includes open-sourced data as well as live code, written in R and presented in notebook form, which readers can use and modify to practice working with data.

Book links: [Springer](https://www.springer.com/gp/book/9783030713515) | [Amazon](https://www.amazon.com/dp/B09F597WXP/)

<br>

```{r, out.width = "65%", echo = F, fig.align = "center"}
knitr::include_graphics(c(
  "Figures/book-cover.png"
))
```

<br>

## Presentations

<br>

__Spatial data (and) science: Fundamentals, applications, and frontiers in env. and resource economics__
<br> EAERE Summer School, July 2024
<br><br>

__Perinatal health effects of herbicides: Glyphosate and the U.S. roll-out of GM crops__
<br> OSU Policy, June 2024
<br><br>

__Perinatal health effects of herbicides: Glyphosate and the U.S. roll-out of GM crops__
<br> AERE Summer Conference, May 2024
<br><br>

__Perinatal health effects of herbicides: Glyphosate and the U.S. roll-out of GM crops__
<br> UCSB Bren, April 2024
<br><br>

__Perinatal health effects of herbicides: Glyphosate and the U.S. roll-out of GM crops__
<br> Land, Environment, Economics and Policy Institute (LEEP) at University of Exeter, February 2024
<br><br>

__Power Plants, Air Pollution, and Regulatory Rebound__
<br> EPIC Junior Workshop (University of Chicago), April 2023
<br><br>

__Declining power-plant emissions, co-benefits, and regulatory rebound__
<br> University of Nebraska–Lincoln, November 2022
<br><br>

__What's missing in environmental (self-)monitoring? Evidence from strategic shutdowns of pollution monitors__
<br> Annual Conference of the European Association of Environmental and Resource Economists, June 2022
<br><br>

__Declining power-plant emissions, co-benefits, and regulatory rebound__
<br> Oregon State University, May 2022
<br><br>

__Power Plants, Air Pollution, and Regulatory Rebound__
<br> National Graduate Institute for Policy Studies (GRIPS), April 2022
<br><br>

__Power Plants, Air Pollution, and Regulatory Rebound__
<br> UC Berkeley ARE, April 2022
<br><br>

__What's missing in environmental (self-)monitoring? Evidence from strategic shutdowns of pollution monitors__
<br> CU Environmental & Resource Economics Workshop, October 2021
<br><br>

__Pollution co-benefits and regulatory rebound__
<br> RFF/EPA, October 2021
<br><br>

__What's missing in environmental (self-)monitoring? Evidence from strategic shutdowns of pollution monitors__
<br> AERE Remote Conference, June 2021
<br><br>

__Downwind and out: The Strategic dispersion of power plants and their pollution__
<br> AERE Remote Conference, June 2021
<br><br>

__A retrospective analysis of indirect air-quality benefits from power-sector emissions reductions__
<br> RFF/EPA (Online), December 2020
<br><br>

__Estimating and decomposing 'the' elasticity of demand: Empirical and policy insights from 600 million natural gas bills__
<br> Duke Energy Data Analytics Symposium (Online), December 2020
<br><br>

__Mismeasurement in exposure and access: Insights from cellphone data__
<br> AERE Remote Conference, June 2020
<br><br>

__Declining power-plant emissions, co-benefits, and regulatory rebound__
<br> ASSA (San Diego), January 2020
<br><br>

__Mismeasurement in exposure and access: Insights from cellphone data__
<br> Western Economic Association Annual Conference, June 2019
<br><br>

__The economic impact of critical-habitat designation: Evidence from vacant-land transactions__
<br> The Occasional Workshop (UCSB), November 2018
<br><br>

__Natural gas elasticities and optimal cost recovery under heterogeneity: Evidence from 300 million natural gas bills in California__
<br> World Congress of Environmental Economics (WCERE), June 2018
<br><br>

__Is "Michelle" less productive than "Michael"? A field experiment on consumer-based gender discrimination in the marketplace__
<br> UC Berkeley, Computational Text Analysis Working Group, April 2018
<br><br>

__Natural gas elasticities and optimal cost recovery under heterogeneity: Evidence from 300 million natural gas bills in California__
<br> University of Oregon, Economics, February 2018
<br><br>

__Is "Michelle" less productive than "Michael"? A field experiment on consumer-based gender discrimination in the marketplace__
<br> IGC-PEDL Workshop at Oxford, December 2017
<br><br>

__Natural gas elasticities and optimal cost recovery under heterogeneity: Evidence from 300 million natural gas bills in California__
<br> Heartland Environmental and Resource Economics Workshop, September 2017
<br><br>

__Is "Michelle" less productive than "Michael"? A field experiment on consumer-based gender discrimination in the marketplace__
<br> Berkeley Development Economics Lunch, September 2017
<br><br>

__Natural gas elasticities and optimal cost recovery under heterogeneity: Evidence from 300 million natural gas bills in California__
<br> Camp Resources, August 2017
<br><br>

__Natural gas elasticities and optimal cost recovery under heterogeneity: Evidence from 300 million natural gas bills in California__
<br> AAEA Annual Meeting, August 2017
<br><br>

__Do marijuana stores increase or reduce neighborhood crime? Evidence from Denver, Colorado__
<br> UC Berkeley, Summer Research Seminar, July 2017
<br><br>

__Natural gas elasticities and optimal cost recovery under heterogeneity: Evidence from 300 million natural gas bills in California__
<br> AERE Annual Summer Conference, June 2017
<br><br>

__Summertime, and pass-through is easier: Chasing down price elasticities for residential natural gas demand in 275 million bills__
<br> 22nd Annual POWER Conference on Energy Research and Policy, March 2017
<br><br>

__Natural gas elasticities, seasonal heterogeneity, and consumer behavior: Evidence from 300M+ bills__
<br> UC Berkeley, Environmental and Resource Economics Seminar, November 2016
<br><br>

__(Mile-) High Quandaries: Evidence from Denver that Marijuana Legalization May Increase Drug Arrests__
<br> UC Berkeley, Environmental and Resource Economics Seminar, April 2015
<br><br>

__Irrigation and Climatic Effects on Water Levels in the U.S. High Plains Aquifer Along the 41st Parallel in Nebraska (and Several Questions about Model Complexity)__
<br> University of Nebraska-Lincoln, Statistics Departmental Seminar, March 2013
<br><br>

__Irrigation and Climatic Effects on Water Levels in the U.S. High Plains Aquifer__
<br> International Conference of Agricultural Economists, poster, August 2012
<br><br>

__Reproductive Ecology of Western Painted Turtles (Chrysemys picta)__
<br> Midwest Fish and Wildlife Conference, poster, December 2006
<br><br>

## R scripts

Run R code in terminal without entering R or saving a script. (The `-e` option evaluates the given R expression.)

```{bash, eval = F}
Rscript -e 'set.seed(12345); x <- rnorm(1e3); mean(x)'
Rscript -e 'rmarkdown::render_site("research.Rmd")'
```

Create a nice timeline (shown below) in R's `ggplot2`.

```{r timeline, echo = F, eval = T, fig.height = 3.5, fig.width = 8.75, fig.retina = 2, dpi = 150, message = F}
# Setup ----
# Packages
library(ggplot2)
# Define colors (from https://www.materialpalette.com)
dark_primary_color   <- "#C2185B"
primary_color        <- "#E91E63"
light_primary_color  <- "#F8BBD0"
text_primary_color   <- "#FFFFFF"
accent_color         <- "#9E9E9E"
primary_text_color   <- "#212121"
secondary_text_color <- "#757575"
divider_color        <- "#BDBDBD"

# Plot the timeline ----
ggplot() +
  # Two rectangles
  geom_rect(aes(xmin = 2009, xmax = 2011+4/12, ymin = 0, ymax = 0.35),
    fill = divider_color) +
  geom_rect(aes(xmin = 2011+4/12, xmax = 2014, ymin = 0, ymax = 0.35),
    fill = light_primary_color) +
  geom_rect(aes(xmin = 2014, xmax = 2017, ymin = 0, ymax = 0.35),
    fill = primary_color) +
  # Label rectangles (periods)
  annotate(geom = "text", x = 2010, y = -0.15, label = "Period A",
    color = divider_color) +
  annotate(geom = "text", x = 2015.5, y = -0.15, label = "Period B",
    color = primary_color) +
  # Add ellipses
  annotate(geom = "point", x = seq(2009-0.15, 2009-0.45, -0.15), y = 0.175,
    size = 1.5, color = divider_color) +
  annotate(geom = "point", x = seq(2017+0.15, 2017+0.45, 0.15), y = 0.175,
    size = 1.5, color = primary_color) +
  # Time axis
  geom_hline(yintercept = 0, size = 1, color = primary_text_color) +
  # Label time
  annotate(geom = "text", x = 2009:2017, y = -0.05, label = 2009:2017,
    size = 4, color = secondary_text_color) +
  # Points for events
  annotate(geom = "point", x = c(2011+4/12, 2012+7/12, 2014), y = 0,
    size = 4, color = primary_text_color) +
  # Label events:
  # First event
  annotate(geom = "text", x = 2011+4/12+0.15, y = 0.9, hjust = 0,
    label = "An event triggers a change", color = primary_text_color) +
  geom_segment(aes(x = 2011+4/12, xend = 2011+4/12,
    y = 0, yend = 0.9), color = primary_text_color) +
  geom_segment(aes(x = 2011+4/12, xend = 2011+4/12+0.1,
    y = 0.9, yend = 0.9), color = primary_text_color) +
  # Intermediate event
  annotate(geom = "text", x = 2012+7/12+0.15, y = 0.7, hjust = 0,
    label = "A relevant intermediate event", color = primary_text_color) +
  geom_segment(aes(x = 2012+7/12, xend = 2012+7/12,
      y = 0, yend = 0.7), color = primary_text_color) +
  geom_segment(aes(x = 2012+7/12, xend = 2012+7/12+0.1,
      y = 0.7, yend = 0.7), color = primary_text_color) +
  # Period B begins
  annotate(geom = "text", x = 2014+0.15, y = 0.5, hjust = 0,
    label = "The new period officially begins", color = primary_text_color) +
  geom_segment(aes(x = 2014, xend = 2014,
      y = 0, yend = 0.5), color = primary_text_color) +
  geom_segment(aes(x = 2014, xend = 2014+0.1,
      y = 0.5, yend = 0.5), color = primary_text_color) +
  # Theme stuff
  theme_bw() +
  ylim(c(-0.15,1)) +
  theme(axis.text = element_blank(), axis.title = element_blank(),
    axis.ticks = element_blank(), panel.grid = element_blank(),
    panel.border = element_blank())
```

```{r timeline, echo = T, eval = F}
```

## LaTeX

My LaTeX (beamer) template: [.tex file](MiscFiles/beamerTemplate.tex) | [example PDF](MiscFiles/beamerTemplate.pdf)

![Example of my slide template.](MiscFiles/beamerTemplate.gif)

## Bash

### List files (recursively) by size

Lists all **files** in a directory (here `.`), sorts from largest to smallest, and displays top `20` (largest).

```{bash, eval = F}
find . -type f -exec du -ah {} + | sort -rh | head -20
``` 
Hat tip: [StackExchange](https://unix.stackexchange.com/questions/22432/getting-size-with-du-of-files-only)

### Pretty CSV scrolling

```{bash, eval = F}
cat data.csv | column -t -s, | less -S
```
Hat tip (and more): [Stefaan Lippens](http://stefaanlippens.net/pretty-csv.html).

For a bit more _raw_ view:
```{bash, eval = F}
column -s, -t < data.csv | less -#2 -N -S
```

### Git

Remove a file (`your.file`) from Git's cache
```{bash, eval = F}
git rm --cached your.file
```

Begin tracking a file extension (`.eg`) with Git's [Large File Storage](https://git-lfs.github.com/) (LFS) and check the `.gitattributes` file for success.
```{bash, eval = F}
git lfs track "*.eg"
nano .gitattributes
```

Check which files LFS currently tracks.
```{bash, eval = F}
git lfs ls-files
```

### Pandoc

Convert a Markdown (`.txt`) file to Word (`.docx`).
```{bash, eval = F}
pandoc -Ss example.txt -o example.docx
```

Convert a Markdown (`.txt`) file to PDF (`.pdf`).
```{bash, eval = F}
pandoc -Ss example.txt -o example.pdf
```

### Renaming

Place a "1" between the first four characters and the subsequent characters in each filename in a folder.
```{bash, eval = F}
for i in *; do mv $i "${i:0:4}1${i:4}"; done
```

### Sleeping and shutdown

Tell the computer to wait a bit and then go to sleep.
```{bash, eval = F}
sleep 14400; pmset sleepnow
```

Tell the computer to shutdown now.
```{bash, eval = F}
sudo shutdown -h now
```

Shut it down at a specific time (here: 2:30pm on 01 January 2016)
```{bash, eval = F}
sudo shutdown -h 1601011530
```

Shut it down after a specified amount of time (here: 30 minutes)
```{bash, eval = F}
sudo shutdown -h +30
```

### Miscellany

OSX: Show only active apps in the terminal. [h/t](https://www.macrumors.com/how-to/macos-dock-show-active-apps/)
```{bash, eval = F}
defaults write com.apple.dock static-only -bool true; killall Dock
```

Kill all processes named "rsession".
```{bash, eval = F}
killall -m "rsession"
```

Re-index the Spotlight utility.
```{bash, eval = F}
sudo mdutil -E /
```

Linux code for playing hide and seek.
<br>_Warning_ You might not want HAL to find you.

```{bash, eval = F}
for i in {1..30}; do say ${i}; done; say 'ready or not, here i come'
```
